@using GCRBA.ViewModels

@{
    ViewBag.Title = "Edit Homepage Banner";
}
<style>
	td{
		text-align:center
	}
</style>
<div id="site-banner" class="some-spacing">
	<h2>@ViewBag.Title</h2>
</div>
@if (ViewBag.isAdmin == false)
{
    <p>This page can only be view by admin. Please log in as an admin and try again.</p>
}
else
{
<table>
	<tr>
		<td>
			<div class="container w-50">
				@using (Html.BeginForm(FormMethod.Post)) {

					// if Flag == 1, banner has successfully been added to database
					if (ViewBag.Flag == 1) {
						// let admin know banner was successfully added to db
						<p id="newBannerSuccess">The homepage banner has been successfully updated! Go to the homepage to view the change.</p>
					}

					<label for="mainBanners" class="mt-5">Select what you would like the main banner to say below:</label>

					<!--display dropdown list of main banners-->
					<select name="mainBanners" id="mainBanners" class="form-select mt-1 mb-4">
						@foreach (var item in Model.MainBanners) {
							<option value="@item.BannerID">@item.Banner</option>
						}
						<option value="new">Enter a new banner</option>
					</select>

					<textarea name="newBanner" id="newBanner" style="display:none" class="form-control mt-2 mb-4"></textarea>

					<button name="btnSubmit" value="submitNewBanner" class="button-action">Submit Change</button>

				}
			</div>
		</td>
	</tr>
</table>
		}

<script>
	// get id of new banner message
	let x = document.getElementById("newBannerSuccess");

	// remove new banner message after it has displayed for 5 seconds
	setTimeout(function () { x.style.display = 'none' }, 5000);

	// display textarea if option with value "new" is chosen in drop down
	$('#mainBanners').on('change', function () {
		$('#newBanner').css('display', (this.value === 'new') ? 'block' : 'none');
	});
</script>


